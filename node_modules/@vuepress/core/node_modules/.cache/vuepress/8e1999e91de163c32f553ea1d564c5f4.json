{"remainingRequest":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\babel-loader\\lib\\index.js??ref--3-1!D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js??ref--6!D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\vue-loader\\lib\\index.js??ref--1-1!D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\@vuepress\\markdown-loader\\index.js??ref--1-2!D:\\dev\\project\\mysite\\tech-arch-doc\\md\\techDocument\\record\\RedisBigKey.md?vue&type=template&id=6ad8e8bc&","dependencies":[{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\md\\techDocument\\record\\RedisBigKey.md","mtime":1709195520192},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696408019332},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696408019332},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\babel-loader\\lib\\index.js","mtime":1696408019022},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1696408019943},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1696408019332},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\vue-loader\\lib\\index.js","mtime":1696408019943},{"path":"D:\\dev\\project\\mysite\\tech-arch-doc\\node_modules\\@vuepress\\markdown-loader\\index.js","mtime":1696408018627}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHsKICB2YXIgX3ZtID0gdGhpcywKICAgIF9jID0gX3ZtLl9zZWxmLl9jOwogIHJldHVybiBfYygnQ29udGVudFNsb3RzRGlzdHJpYnV0b3InLCB7CiAgICBhdHRyczogewogICAgICAic2xvdC1rZXkiOiBfdm0uJHBhcmVudC5zbG90S2V5CiAgICB9CiAgfSwgW19jKCdoMScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICJyZWRpc+Wkp2tleeino+WGs+aWueahiCIKICAgIH0KICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogImhlYWRlci1hbmNob3IiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiI3JlZGlz5aSna2V56Kej5Yaz5pa55qGIIgogICAgfQogIH0sIFtfdm0uX3YoIiMiKV0pLCBfdm0uX3YoIiBSZWRpc+Wkp0tleeino+WGs+aWueahiCIpXSksIF92bS5fdigiICIpLCBfYygnaDInLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAi5Lqn55SfIgogICAgfQogIH0sIFtfYygnYScsIHsKICAgIHN0YXRpY0NsYXNzOiAiaGVhZGVyLWFuY2hvciIsCiAgICBhdHRyczogewogICAgICAiaHJlZiI6ICIj5Lqn55SfIgogICAgfQogIH0sIFtfdm0uX3YoIiMiKV0pLCBfdm0uX3YoIiDkuqfnlJ8iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJSZWRpc+Wkp2tleeeahOS6p+eUn+S4gOiIrOmDvea2ieWPiuWIsOWvueW6lOeahHZhbHVl6Z2e5bi45aSn44CC5q+U5aaC5a+55bqU55qE5LiA5Liq5Lia5Yqh5Zy65pmv55qE5LiA5Liqa2V55a2Y5YKo5LqG5b6I5aSa55qE55So5oi35L+h5oGv562J77yM6L+Z5qC355qEdmFsdWXlsLHkvJrpnZ7luLjlpKfvvIzlsLHkvJrkuqfnlJ/lr7nlupTnmoTlpKdrZXnvvIzkuIDoiKzlpKflsI/lnKgxMGti5Lul5LiK5bCx6K6k5Li65pivIildKSwgX3ZtLl92KCIgIiksIF9jKCdoMicsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICLlvbHlk40iCiAgICB9CiAgfSwgW19jKCdhJywgewogICAgc3RhdGljQ2xhc3M6ICJoZWFkZXItYW5jaG9yIiwKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogIiPlvbHlk40iCiAgICB9CiAgfSwgW192bS5fdigiIyIpXSksIF92bS5fdigiIOW9seWTjSIpXSksIF92bS5fdigiICIpLCBfYygncCcsIFtfdm0uX3YoIuS6p+eUn1JlZGlz55qE5aSnS2V55pyJ5LuA5LmI5b2x5ZON5ZGi77yfXG7lm6DkuLpSZWRpc+aYr+WNlee6v+eoi++8jOaJgOS7peS8muS6p+eUn+WuouaIt+err+eahOmYu+WhnueOsOixoe+8jOmCo+S5iOafpeivoueahOi2iuWkmu+8jOmYu+WhnueahOS5n+Wwsei2iuS4pemHje+8jOWwseS8muS6p+eUn3JlZGlz55qE5oWi5p+l6K+i546w6LGh44CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5bm25LiU5a+55LqO6ZuG576k5p2l6K+077yM5LuW55qE6L+Z5Liqc2xvdOWIhueJh+Wdh+WMgOeahOaDheWGteS4i++8jOafpeivouS8muWHuueOsOWAvuaWnO+8jOW5tuS4lOmDqOWIhuWkp0tleeS8muWvvOiHtFJlZGlz6IqC54K55Y2g55So55qE5YaF5a2Y5aSa77yM5LuO6ICM5a+86Ie0UVBT6L+H6auY44CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5ZCM5qC35a+55LqO5aSna2V55p2l6K+077yM572R57uc5Lyg6L6T5Lmf5piv5LiA5Liq6Zeu6aKY77yM5Zug5Li66L+Z5Liq5aSna2V55Lqn55Sf55qE572R57uc5rWB6YeP5b6I5aSn77yM5oiR5Lus6YO955+l6YGT5YiG5biD5byP57O757uf5Li76KaB5b2x5ZON6YCf5bqm55qE5bCx5piv572R57uc5pa56Z2i44CCXG7miZPkuKrmr5TmlrnvvIzlpoLmnpzkuIDkuKprZXnnmoTlpKflsI/mmK8xbWLvvIzmr4/np5Lorr/pl64xMDAw5qyh77yM5Lmf5bCx5piv5q+P56eS5Lqn55SfMTAwME1C55qE5rWB6YeP77yM5Yq/5b+F5Lya5a+86Ie0572R57uc5oul5aGe44CCXG7ogIzmiJHku6znn6XpgZPlr7nkuo5UQ1DmnaXor7TvvIzlpoLmnpzkvKDovpPlpLHotKXvvIzpgqPkuYjkvJrlvJXlj5Hku5bnmoTotoXml7bph43kvKDvvIzov5nmoLfkuIvmnaXvvIzkuIDkuKrmjqXlj6PnmoTor7fmsYLpgJ/luqblir/lv4XkvJrmlL7mhaLjgILov5nlr7nkuo7mnI3liqHlmajmnaXor7TmmK/ngb7pmr7mgKfnmoTjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2gyJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogIuajgOa1iyIKICAgIH0KICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogImhlYWRlci1hbmNob3IiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiI+ajgOa1iyIKICAgIH0KICB9LCBbX3ZtLl92KCIjIildKSwgX3ZtLl92KCIg5qOA5rWLIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5ZyoUmVkaXM0LjDku6XlkI7vvIzlj6/ku6Xnm7TmjqXov5vooYzlr7nlupTnmoTlpKdLZXnov5vooYzmiavmj4/vvIzlpoJzY2FuICsgbWVtb3J5IHVzYWdl5ZG95Luk77yM5L2G5piv6L+Z5Liq5omr5o+P6L+H56iL5Lya6YGN5Y6G5omr5o+P77yM5aaC5p6c5L2g55qEa2V56Z2e5bi45aSa55qE6K+d77yM5bCx5Lya6Z2e5bi45oWi44CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5Lmf5Y+v5Lul5L2/55So5LiA5Lqb56ys5LiJ5pa555qE5bel5YW36L+b6KGM5omr5o+P44CC5q+U5aaCcmRidG9vbHMiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2gyJywgewogICAgYXR0cnM6IHsKICAgICAgImlkIjogIuWIoOmZpCIKICAgIH0KICB9LCBbX2MoJ2EnLCB7CiAgICBzdGF0aWNDbGFzczogImhlYWRlci1hbmNob3IiLAogICAgYXR0cnM6IHsKICAgICAgImhyZWYiOiAiI+WIoOmZpCIKICAgIH0KICB9LCBbX3ZtLl92KCIjIildKSwgX3ZtLl92KCIg5Yig6ZmkIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5LiA6Iis5oOF5Ya15LiL5LiN6IO95aSf55u05o6l5L2/55SoZGVs55u05o6l5Yig6Zmk5a+55bqU55qE5aSna2V577yM5Zug5Li65LiA6Iis5LiA5Liq5aSna2V56YO95piv5LiA5Liq6ZuG5ZCI77yM6YKj5LmI5Yig6Zmk55qE5pe26Ze05aSN5p2C5bqm5bCx5piv6L+Z5Liq6ZuG5ZCI55qE5aSn5bCP44CCXG7miYDku6Xlr7nkuo7lpKdrZXnvvIzliKDpmaTkvJrpnZ7luLjogJfotLnml7bpl7TvvIzlj6/og73kvJrkuqfnlJ/pmLvloZ7vvIzlvbHlk43lhbbku5bmn6Xor6LmlYjnjofjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLmiYDku6XmiJHku6zlj6/ku6XliIbmibnmrKHov5vooYzmiavmj48r5Yig6Zmk44CCIildKV0pOwp9Owp2YXIgc3RhdGljUmVuZGVyRm5zID0gW107CmV4cG9ydCB7IHJlbmRlciwgc3RhdGljUmVuZGVyRm5zIH07"},{"version":3,"names":["render","_vm","_c","_self","attrs","$parent","slotKey","staticClass","_v","staticRenderFns"],"sources":["D:/dev/project/mysite/tech-arch-doc/md/techDocument/record/RedisBigKey.md"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"redis大key解决方案\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#redis大key解决方案\"}},[_vm._v(\"#\")]),_vm._v(\" Redis大Key解决方案\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"产生\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#产生\"}},[_vm._v(\"#\")]),_vm._v(\" 产生\")]),_vm._v(\" \"),_c('p',[_vm._v(\"Redis大key的产生一般都涉及到对应的value非常大。比如对应的一个业务场景的一个key存储了很多的用户信息等，这样的value就会非常大，就会产生对应的大key，一般大小在10kb以上就认为是\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"影响\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#影响\"}},[_vm._v(\"#\")]),_vm._v(\" 影响\")]),_vm._v(\" \"),_c('p',[_vm._v(\"产生Redis的大Key有什么影响呢？\\n因为Redis是单线程，所以会产生客户端的阻塞现象，那么查询的越多，阻塞的也就越严重，就会产生redis的慢查询现象。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"并且对于集群来说，他的这个slot分片均匀的情况下，查询会出现倾斜，并且部分大Key会导致Redis节点占用的内存多，从而导致QPS过高。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"同样对于大key来说，网络传输也是一个问题，因为这个大key产生的网络流量很大，我们都知道分布式系统主要影响速度的就是网络方面。\\n打个比方，如果一个key的大小是1mb，每秒访问1000次，也就是每秒产生1000MB的流量，势必会导致网络拥塞。\\n而我们知道对于TCP来说，如果传输失败，那么会引发他的超时重传，这样下来，一个接口的请求速度势必会放慢。这对于服务器来说是灾难性的。\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"检测\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#检测\"}},[_vm._v(\"#\")]),_vm._v(\" 检测\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在Redis4.0以后，可以直接进行对应的大Key进行扫描，如scan + memory usage命令，但是这个扫描过程会遍历扫描，如果你的key非常多的话，就会非常慢。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"也可以使用一些第三方的工具进行扫描。比如rdbtools\")]),_vm._v(\" \"),_c('h2',{attrs:{\"id\":\"删除\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#删除\"}},[_vm._v(\"#\")]),_vm._v(\" 删除\")]),_vm._v(\" \"),_c('p',[_vm._v(\"一般情况下不能够直接使用del直接删除对应的大key，因为一般一个大key都是一个集合，那么删除的时间复杂度就是这个集合的大小。\\n所以对于大key，删除会非常耗费时间，可能会产生阻塞，影响其他查询效率。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"所以我们可以分批次进行扫描+删除。\")])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"mappings":"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"}]}